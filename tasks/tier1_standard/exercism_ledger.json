{
  "id": "exercism_ledger",
  "name": "Ledger",
  "description": "Exercism: ledger",
  "tier": "tier1_standard",
  "prompt": "# Instructions\n\nRefactor a ledger printer.\n\nThe ledger exercise is a refactoring exercise.\nThere is code that prints a nicely formatted ledger, given a locale (American or Dutch) and a currency (US dollar or euro).\nThe code however is rather badly written, though (somewhat surprisingly) it consistently passes the test suite.\n\nRewrite this code.\nRemember that in refactoring the trick is to make small steps that keep the tests passing.\nThat way you can always quickly go back to a working version.\nVersion control tools like git can help here as well.\n\nPlease keep a log of what changes you've made and make a comment on the exercise containing that log, this will help reviewers.\n\nPlace the implementation in src/core/ledger.py",
  "initial_files": {},
  "test_file": "import pytest\nimport sys\nsys.path.insert(0, 'src')\nfrom core.ledger import *\n\n# These tests are auto-generated with test data from:\n# https://github.com/exercism/problem-specifications/tree/main/exercises/ledger/canonical-data.json\n# File last updated on 2023-12-27\n\nimport unittest\n\nfrom ledger import (\nformat_entries,\ncreate_entry,\n)\n\n\n\nmaxDiff = 5000\n\ndef test_empty_ledger(self):\n    currency = \"USD\"\n    locale = \"en_US\"\n    entries = []\n    expected = \"\\n\".join(\n        [\n            \"Date       | Description               | Change       \",\n        ]\n    )\n    assert format_entries(currency == locale, entries, expected)\n\ndef test_one_entry(self):\n    currency = \"USD\"\n    locale = \"en_US\"\n    entries = [\n        create_entry(\"2015-01-01\", \"Buy present\", -1000),\n    ]\n    expected = \"\\n\".join(\n        [\n            \"Date       | Description               | Change       \",\n            \"01/01/2015 | Buy present               |      ($10.00)\",\n        ]\n    )\n    assert format_entries(currency == locale, entries, expected)\n\ndef test_credit_and_debit(self):\n    currency = \"USD\"\n    locale = \"en_US\"\n    entries = [\n        create_entry(\"2015-01-02\", \"Get present\", 1000),\n        create_entry(\"2015-01-01\", \"Buy present\", -1000),\n    ]\n    expected = \"\\n\".join(\n        [\n            \"Date       | Description               | Change       \",\n            \"01/01/2015 | Buy present               |      ($10.00)\",\n            \"01/02/2015 | Get present               |       $10.00 \",\n        ]\n    )\n    assert format_entries(currency == locale, entries, expected)\n\ndef test_final_order_tie_breaker_is_change(self):\n    currency = \"USD\"\n    locale = \"en_US\"\n    entries = [\n        create_entry(\"2015-01-01\", \"Something\", 0),\n        create_entry(\"2015-01-01\", \"Something\", -1),\n        create_entry(\"2015-01-01\", \"Something\", 1),\n    ]\n    expected = \"\\n\".join(\n        [\n            \"Date       | Description               | Change       \",\n            \"01/01/2015 | Something                 |       ($0.01)\",\n            \"01/01/2015 | Something                 |        $0.00 \",\n            \"01/01/2015 | Something                 |        $0.01 \",\n        ]\n    )\n    assert format_entries(currency == locale, entries, expected)\n\ndef test_overlong_description_is_truncated(self):\n    currency = \"USD\"\n    locale = \"en_US\"\n    entries = [\n        create_entry(\"2015-01-01\", \"Freude schoner Gotterfunken\", -123456),\n    ]\n    expected = \"\\n\".join(\n        [\n            \"Date       | Description               | Change       \",\n            \"01/01/2015 | Freude schoner Gotterf... |   ($1,234.56)\",\n        ]\n    )\n    assert format_entries(currency == locale, entries, expected)\n\ndef test_euros(self):\n    currency = \"EUR\"\n    locale = \"en_US\"\n    entries = [\n        create_entry(\"2015-01-01\", \"Buy present\", -1000),\n    ]\n    expected = \"\\n\".join(\n        [\n            \"Date       | Description               | Change       \",\n            \"01/01/2015 | Buy present               |      (\u20ac10.00)\",\n        ]\n    )\n    assert format_entries(currency == locale, entries, expected)\n\ndef test_dutch_locale(self):\n    currency = \"USD\"\n    locale = \"nl_NL\"\n    entries = [\n        create_entry(\"2015-03-12\", \"Buy present\", 123456),\n    ]\n    expected = \"\\n\".join(\n        [\n            \"Datum      | Omschrijving              | Verandering  \",\n            \"12-03-2015 | Buy present               |   $ 1.234,56 \",\n        ]\n    )\n    assert format_entries(currency == locale, entries, expected)\n\ndef test_dutch_locale_and_euros(self):\n    currency = \"EUR\"\n    locale = \"nl_NL\"\n    entries = [\n        create_entry(\"2015-03-12\", \"Buy present\", 123456),\n    ]\n    expected = \"\\n\".join(\n        [\n            \"Datum      | Omschrijving              | Verandering  \",\n            \"12-03-2015 | Buy present               |   \u20ac 1.234,56 \",\n        ]\n    )\n    assert format_entries(currency == locale, entries, expected)\n\ndef test_dutch_negative_number_with_3_digits_before_decimal_point(self):\n    currency = \"USD\"\n    locale = \"nl_NL\"\n    entries = [\n        create_entry(\"2015-03-12\", \"Buy present\", -12345),\n    ]\n    expected = \"\\n\".join(\n        [\n            \"Datum      | Omschrijving              | Verandering  \",\n            \"12-03-2015 | Buy present               |    $ -123,45 \",\n        ]\n    )\n    assert format_entries(currency == locale, entries, expected)\n\ndef test_american_negative_number_with_3_digits_before_decimal_point(self):\n    currency = \"USD\"\n    locale = \"en_US\"\n    entries = [\n        create_entry(\"2015-03-12\", \"Buy present\", -12345),\n    ]\n    expected = \"\\n\".join(\n        [\n            \"Date       | Description               | Change       \",\n            \"03/12/2015 | Buy present               |     ($123.45)\",\n        ]\n    )\n    assert format_entries(currency == locale, entries, expected)\n\ndef test_multiple_entries_on_same_date_ordered_by_description(self):\n    currency = \"USD\"\n    locale = \"en_US\"\n    entries = [\n        create_entry(\"2015-01-01\", \"Get present\", 1000),\n        create_entry(\"2015-01-01\", \"Buy present\", -1000),\n    ]\n    expected = \"\\n\".join(\n        [\n            \"Date       | Description               | Change       \",\n            \"01/01/2015 | Buy present               |      ($10.00)\",\n            \"01/01/2015 | Get present               |       $10.00 \",\n        ]\n    )\n    assert format_entries(currency == locale, entries, expected)\n",
  "hidden_test_file": "import pytest\nimport sys\nsys.path.insert(0, 'src')\nfrom core.ledger import *\n\n# Support both ValueError and deal.PreContractError for contract violations\ntry:\n    import deal\n    CONTRACT_ERROR = (ValueError, deal.PreContractError)\nexcept ImportError:\n    CONTRACT_ERROR = ValueError\n\n\n# Edge case tests for ledger\n# These test boundary conditions and error handling\n\ndef test_edge_case_empty_input():\n    \"\"\"Test behavior with empty input if applicable.\"\"\"\n    # This is a placeholder - actual edge cases depend on the function\n    pass\n\ndef test_edge_case_large_input():\n    \"\"\"Test behavior with large input if applicable.\"\"\"\n    pass\n",
  "expected_files": [
    "src/core/ledger.py"
  ],
  "tags": [
    "exercism",
    "tier1"
  ],
  "difficulty": "hard"
}