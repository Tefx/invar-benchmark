{
  "id": "exercism_bowling",
  "name": "Bowling",
  "description": "Exercism: bowling",
  "tier": "tier2_contracts",
  "prompt": "# Instructions\n\nScore a bowling game.\n\nBowling is a game where players roll a heavy ball to knock down pins arranged in a triangle.\nWrite code to keep track of the score of a game of bowling.\n\n## Scoring Bowling\n\nThe game consists of 10 frames.\nA frame is composed of one or two ball throws with 10 pins standing at frame initialization.\nThere are three cases for the tabulation of a frame.\n\n- An open frame is where a score of less than 10 is recorded for the frame.\n  In this case the score for the frame is the number of pins knocked down.\n\n- A spare is where all ten pins are knocked down by the second throw.\n  The total value of a spare is 10 plus the number of pins knocked down in their next throw.\n\n- A strike is where all ten pins are knocked down by the first throw.\n  The total value of a strike is 10 plus the number of pins knocked down in the next two throws.\n  If a strike is immediately followed by a second strike, then the value of the first strike cannot be determined until the ball is thrown one more time.\n\nHere is a three frame example:\n\n|  Frame 1   |  Frame 2   |     Frame 3      |\n| :--------: | :--------: | :--------------: |\n| X (strike) | 5/ (spare) | 9 0 (open frame) |\n\nFrame 1 is (10 + 5 + 5) = 20\n\nFrame 2 is (5 + 5 + 9) = 19\n\nFrame 3 is (9 + 0) = 9\n\nThis means the current running total is 48.\n\nThe tenth frame in the game is a special case.\nIf someone throws a spare or a strike then they get one or two fill balls respectively.\nFill balls exist to calculate the total of the 10th frame.\nScoring a strike or spare on the fill ball does not give the player more fill balls.\nThe total value of the 10th frame is the total number of pins knocked down.\n\nFor a tenth frame of X1/ (strike and a spare), the total value is 20.\n\nFor a tenth frame of XXX (three strikes), the total value is 30.\n\n## Requirements\n\nWrite code to keep track of the score of a game of bowling.\nIt should support two operations:\n\n- `roll(pins : int)` is called each time the player rolls a ball.\n  The argument is the number of pins knocked down.\n- `score() : int` is called only at the very end of the game.\n  It returns the total score for that game.\n# Instructions append\n\n## Exception messages\n\nSometimes it is necessary to [raise an exception](https://docs.python.org/3/tutorial/errors.html#raising-exceptions). When you do this, you should always include a **meaningful error message** to indicate what the source of the error is. This makes your code more readable and helps significantly with debugging. For situations where you know that the error source will be a certain type, you can choose to raise one of the [built in error types](https://docs.python.org/3/library/exceptions.html#base-classes), but should still include a meaningful message.\n\nThis particular exercise requires that you use the [raise statement](https://docs.python.org/3/reference/simple_stmts.html#the-raise-statement) to \"throw\" an error when the scoring or playing rules are not followed. The tests will only pass if you both `raise` the `exception` and include a message with it.\n\nTo raise a `ValueError` with a message, write the message as an argument to the `exception` type:\n\n```python\n# example when a bonus is attempted with an open frame\nraise IndexError(\"cannot throw bonus with an open tenth frame\")\n\n# example when fill balls are invalid\nraise ValueError(\"invalid fill balls\")\n```\n\nPlace the implementation in src/core/bowling.py\n\nUse @pre and @post decorators from the deal library to specify contracts.",
  "initial_files": {},
  "test_file": "import pytest\nimport sys\nsys.path.insert(0, 'src')\nfrom core.bowling import *\n\n# These tests are auto-generated with test data from:\n# https://github.com/exercism/problem-specifications/tree/main/exercises/bowling/canonical-data.json\n# File last updated on 2023-07-21\n\nimport unittest\n\nfrom bowling import (\nBowlingGame,\n)\n\n\n\ndef roll_new_game(self, rolls):\n    game = BowlingGame()\n    for roll in rolls:\n        game.roll(roll)\n    return game\n\ndef test_should_be_able_to_score_a_game_with_all_zeros(self):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n    game = roll_new_game(rolls)\n    assert game.score() == 0\n\ndef test_should_be_able_to_score_a_game_with_no_strikes_or_spares(self):\n    rolls = [3, 6, 3, 6, 3, 6, 3, 6, 3, 6, 3, 6, 3, 6, 3, 6, 3, 6, 3, 6]\n    game = roll_new_game(rolls)\n    assert game.score() == 90\n\ndef test_a_spare_followed_by_zeros_is_worth_ten_points(self):\n    rolls = [6, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n    game = roll_new_game(rolls)\n    assert game.score() == 10\n\ndef test_points_scored_in_the_roll_after_a_spare_are_counted_twice(self):\n    rolls = [6, 4, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n    game = roll_new_game(rolls)\n    assert game.score() == 16\n\ndef test_consecutive_spares_each_get_a_one_roll_bonus(self):\n    rolls = [5, 5, 3, 7, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n    game = roll_new_game(rolls)\n    assert game.score() == 31\n\ndef test_a_spare_in_the_last_frame_gets_a_one_roll_bonus_that_is_counted_once(self):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 3, 7]\n    game = roll_new_game(rolls)\n    assert game.score() == 17\n\ndef test_a_strike_earns_ten_points_in_a_frame_with_a_single_roll(self):\n    rolls = [10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n    game = roll_new_game(rolls)\n    assert game.score() == 10\n\ndef test_points_scored_in_the_two_rolls_after_a_strike_are_counted_twice_as_a_bonus(\n    self,\n):\n    rolls = [10, 5, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n    game = roll_new_game(rolls)\n    assert game.score() == 26\n\ndef test_consecutive_strikes_each_get_the_two_roll_bonus(self):\n    rolls = [10, 10, 10, 5, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n    game = roll_new_game(rolls)\n    assert game.score() == 81\n\ndef test_a_strike_in_the_last_frame_gets_a_two_roll_bonus_that_is_counted_once(\n    self,\n):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 7, 1]\n    game = roll_new_game(rolls)\n    assert game.score() == 18\n\ndef test_rolling_a_spare_with_the_two_roll_bonus_does_not_get_a_bonus_roll(self):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 7, 3]\n    game = roll_new_game(rolls)\n    assert game.score() == 20\n\ndef test_strikes_with_the_two_roll_bonus_do_not_get_bonus_rolls(self):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 10, 10]\n    game = roll_new_game(rolls)\n    assert game.score() == 30\n\ndef test_last_two_strikes_followed_by_only_last_bonus_with_non_strike_points(self):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 10, 0, 1]\n    game = roll_new_game(rolls)\n    assert game.score() == 31\n\ndef test_a_strike_with_the_one_roll_bonus_after_a_spare_in_the_last_frame_does_not_get_a_bonus(\n    self,\n):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 3, 10]\n    game = roll_new_game(rolls)\n    assert game.score() == 20\n\ndef test_all_strikes_is_a_perfect_game(self):\n    rolls = [10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10]\n    game = roll_new_game(rolls)\n    assert game.score() == 300\n\ndef test_rolls_cannot_score_negative_points(self):\n    rolls = []\n    game = roll_new_game(rolls)\n    with assertRaisesWithMessage(Exception):\n        game.roll(-1)\n\ndef test_a_roll_cannot_score_more_than_10_points(self):\n    rolls = []\n    game = roll_new_game(rolls)\n    with assertRaisesWithMessage(Exception):\n        game.roll(11)\n\ndef test_two_rolls_in_a_frame_cannot_score_more_than_10_points(self):\n    rolls = [5]\n    game = roll_new_game(rolls)\n    with assertRaisesWithMessage(Exception):\n        game.roll(6)\n\ndef test_bonus_roll_after_a_strike_in_the_last_frame_cannot_score_more_than_10_points(\n    self,\n):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10]\n    game = roll_new_game(rolls)\n    with assertRaisesWithMessage(Exception):\n        game.roll(11)\n\ndef test_two_bonus_rolls_after_a_strike_in_the_last_frame_cannot_score_more_than_10_points(\n    self,\n):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 5]\n    game = roll_new_game(rolls)\n    with assertRaisesWithMessage(Exception):\n        game.roll(6)\n\ndef test_two_bonus_rolls_after_a_strike_in_the_last_frame_can_score_more_than_10_points_if_one_is_a_strike(\n    self,\n):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 10, 6]\n    game = roll_new_game(rolls)\n    assert game.score() == 26\n\ndef test_the_second_bonus_rolls_after_a_strike_in_the_last_frame_cannot_be_a_strike_if_the_first_one_is_not_a_strike(\n    self,\n):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 6]\n    game = roll_new_game(rolls)\n    with assertRaisesWithMessage(Exception):\n        game.roll(10)\n\ndef test_second_bonus_roll_after_a_strike_in_the_last_frame_cannot_score_more_than_10_points(\n    self,\n):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 10]\n    game = roll_new_game(rolls)\n    with assertRaisesWithMessage(Exception):\n        game.roll(11)\n\ndef test_an_unstarted_game_cannot_be_scored(self):\n    rolls = []\n    game = roll_new_game(rolls)\n    with assertRaisesWithMessage(Exception):\n        game.score()\n\ndef test_an_incomplete_game_cannot_be_scored(self):\n    rolls = [0, 0]\n    game = roll_new_game(rolls)\n    with assertRaisesWithMessage(Exception):\n        game.score()\n\ndef test_cannot_roll_if_game_already_has_ten_frames(self):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n    game = roll_new_game(rolls)\n    with assertRaisesWithMessage(Exception):\n        game.roll(0)\n\ndef test_bonus_rolls_for_a_strike_in_the_last_frame_must_be_rolled_before_score_can_be_calculated(\n    self,\n):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10]\n    game = roll_new_game(rolls)\n    with assertRaisesWithMessage(Exception):\n        game.score()\n\ndef test_both_bonus_rolls_for_a_strike_in_the_last_frame_must_be_rolled_before_score_can_be_calculated(\n    self,\n):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 10]\n    game = roll_new_game(rolls)\n    with assertRaisesWithMessage(Exception):\n        game.score()\n\ndef test_bonus_roll_for_a_spare_in_the_last_frame_must_be_rolled_before_score_can_be_calculated(\n    self,\n):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 3]\n    game = roll_new_game(rolls)\n    with assertRaisesWithMessage(Exception):\n        game.score()\n\ndef test_cannot_roll_after_bonus_roll_for_spare(self):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 3, 2]\n    game = roll_new_game(rolls)\n    with assertRaisesWithMessage(Exception):\n        game.roll(2)\n\ndef test_cannot_roll_after_bonus_rolls_for_strike(self):\n    rolls = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 3, 2]\n    game = roll_new_game(rolls)\n    with assertRaisesWithMessage(Exception):\n        game.roll(2)\n\n# Utility functions\ndef assertRaisesWithMessage(self, exception):\n    return assertRaisesRegex(exception, r\".+\")\n",
  "hidden_test_file": "import pytest\nimport sys\nsys.path.insert(0, 'src')\nfrom core.bowling import *\n\n# Support both ValueError and deal.PreContractError for contract violations\ntry:\n    import deal\n    CONTRACT_ERROR = (ValueError, deal.PreContractError)\nexcept ImportError:\n    CONTRACT_ERROR = ValueError\n\n\n# Edge case tests for bowling\n# These test boundary conditions and error handling\n\ndef test_edge_case_empty_input():\n    \"\"\"Test behavior with empty input if applicable.\"\"\"\n    # This is a placeholder - actual edge cases depend on the function\n    pass\n\ndef test_edge_case_large_input():\n    \"\"\"Test behavior with large input if applicable.\"\"\"\n    pass\n",
  "expected_files": [
    "src/core/bowling.py"
  ],
  "tags": [
    "exercism",
    "tier2"
  ],
  "difficulty": "hard"
}