{
  "id": "task_105_date_range",
  "name": "Date Range Validator",
  "description": "Implement date range with start < end invariant",
  "tier": "tier2_contracts",
  "prompt": "Create a DateRange class with the following:\n- `__init__(self, start: date, end: date)` - Create range where start must be before or equal to end\n- `start` property - Get start date\n- `end` property - Get end date  \n- `days(self)` - Return number of days in range (inclusive)\n- `contains(self, d: date)` - Check if date is within range (inclusive)\n- `overlaps(self, other: 'DateRange')` - Check if ranges overlap\n- `extend(self, days: int)` - Extend end date by given days (can be negative but result must maintain start <= end)\n\nRaise ValueError for invalid inputs. Consider using contracts to enforce the start <= end invariant. Place the implementation in src/core/date_range.py",
  "initial_files": {},
  "test_file": "import pytest\nimport sys\nfrom datetime import date\nsys.path.insert(0, 'src')\nfrom core.date_range import DateRange\n\ndef test_create_valid_range():\n    r = DateRange(date(2024, 1, 1), date(2024, 1, 31))\n    assert r.start == date(2024, 1, 1)\n    assert r.end == date(2024, 1, 31)\n\ndef test_same_day_range():\n    r = DateRange(date(2024, 1, 1), date(2024, 1, 1))\n    assert r.days() == 1\n\ndef test_days_count():\n    r = DateRange(date(2024, 1, 1), date(2024, 1, 10))\n    assert r.days() == 10\n\ndef test_contains():\n    r = DateRange(date(2024, 1, 1), date(2024, 1, 31))\n    assert r.contains(date(2024, 1, 15)) is True\n    assert r.contains(date(2024, 2, 1)) is False\n\ndef test_overlaps():\n    r1 = DateRange(date(2024, 1, 1), date(2024, 1, 15))\n    r2 = DateRange(date(2024, 1, 10), date(2024, 1, 31))\n    assert r1.overlaps(r2) is True\n",
  "hidden_test_file": "import pytest\nimport sys\nfrom datetime import date\nsys.path.insert(0, 'src')\nfrom core.date_range import DateRange\n\n# Support both ValueError and deal.PreContractError for contract violations\ntry:\n    import deal\n    CONTRACT_ERROR = (ValueError, deal.PreContractError)\nexcept ImportError:\n    CONTRACT_ERROR = ValueError\n\n\ndef test_end_before_start():\n    with pytest.raises(CONTRACT_ERROR):\n        DateRange(date(2024, 1, 31), date(2024, 1, 1))\n\ndef test_contains_boundary_start():\n    r = DateRange(date(2024, 1, 1), date(2024, 1, 31))\n    assert r.contains(date(2024, 1, 1)) is True\n\ndef test_contains_boundary_end():\n    r = DateRange(date(2024, 1, 1), date(2024, 1, 31))\n    assert r.contains(date(2024, 1, 31)) is True\n\ndef test_no_overlap():\n    r1 = DateRange(date(2024, 1, 1), date(2024, 1, 10))\n    r2 = DateRange(date(2024, 1, 20), date(2024, 1, 31))\n    assert r1.overlaps(r2) is False\n\ndef test_extend_positive():\n    r = DateRange(date(2024, 1, 1), date(2024, 1, 10))\n    r.extend(5)\n    assert r.end == date(2024, 1, 15)\n\ndef test_extend_negative_valid():\n    r = DateRange(date(2024, 1, 1), date(2024, 1, 10))\n    r.extend(-5)\n    assert r.end == date(2024, 1, 5)\n\ndef test_extend_negative_invalid():\n    r = DateRange(date(2024, 1, 5), date(2024, 1, 10))\n    with pytest.raises(CONTRACT_ERROR):\n        r.extend(-10)  # Would make end before start\n\ndef test_adjacent_ranges_no_overlap():\n    r1 = DateRange(date(2024, 1, 1), date(2024, 1, 10))\n    r2 = DateRange(date(2024, 1, 11), date(2024, 1, 20))\n    assert r1.overlaps(r2) is False\n",
  "expected_files": [
    "src/core/date_range.py"
  ],
  "tags": [
    "class",
    "invariant",
    "date",
    "validation"
  ],
  "difficulty": "medium"
}
